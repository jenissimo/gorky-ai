Ты — опытный писатель. На основе предоставленного описания сюжета создай детальную структуру книги.

Story Outline:
{{ story_outline }}

Параметры структуры:
- Количество глав: {{ structure_params.chapters }}
- Сцен в главе: {{ structure_params.scenes_per_chapter }}
- Слов в сцене: {{ structure_params.words_per_scene }}

Создай структуру в формате JSON со следующими требованиями:

1. Каждая глава должна содержать:
   - Номер главы
   - Название главы
   - Описание главы
   - Список сцен

2. Каждая сцена должна содержать:
   - Номер сцены
   - Название сцены
   - Описание сцены
   - Список действующих лиц
   - Место действия
   - Время действия
   - Драматическую информацию:
     * Тип сцены (setup/development/climax/resolution)
     * Уровень напряжения (нарастающее/высокое/пиковое/спадающее)
     * Является ли поворотной точкой
     * Цели сцены
     * Драматические вопросы
     * Обязательные элементы

3. {% if structure_params.chapters == 1 %}
Структура очень короткой истории (3 сцены):
   - Сцена 1 (setup):
     * Быстрое введение главных персонажей
     * Яркая завязка конфликта
     * Установка основного драматического вопроса
   - Сцена 2 (development/climax):
     * Стремительное развитие конфликта
     * Нарастание напряжения до пика
     * Кульминационный момент
   - Сцена 3 (resolution):
     * Эффективное разрешение конфликта
     * Ответ на основной драматический вопрос
     * Завершение арок персонажей
{% else %}
Структура должна следовать трехактной модели:
   - Первые 25% глав: setup (завязка)
   - Следующие 50% глав: development/confrontation (развитие)
   - Последние 25% глав: resolution (развязка)
{% endif %}

4. {% if structure_params.chapters == 1 %}
Драматические функции сцен:
   - Первая сцена: представление персонажей и конфликта, создание интриги
   - Вторая сцена: обострение конфликта, усложнение препятствий, кульминация
   - Третья сцена: разрешение конфликта, трансформация персонажей
{% else %}
Каждая глава должна иметь четкую драматическую функцию:
   - Setup: представление персонажей и конфликта
   - Confrontation: развитие конфликта и усложнение препятствий
   - Resolution: разрешение конфликта и завершение арок
{% endif %}

5. {% if structure_params.chapters == 1 %}
Требования к сценам короткой истории:
   - Каждая сцена должна быть насыщенной и целенаправленной
   - Все элементы должны работать на основной конфликт
   - Характеры раскрываются через ключевые действия
   - Второстепенные линии минимизированы
{% else %}
Сцены должны быть связаны причинно-следственными связями:
   - Каждая сцена вытекает из предыдущей
   - События развиваются логично и последовательно
   - Действия персонажей мотивированы
{% endif %}

Пожалуйста, верни структуру в следующем формате:
{
    "chapters": [
        {
            "number": 1,
            "title": "Название главы",
            "description": "Описание главы",
            "scenes": [
                {
                    "number": 1,
                    "title": "Название сцены",
                    "description": "Описание сцены",
                    "characters": ["Персонаж 1", "Персонаж 2"],
                    "location": "Место действия",
                    "time": "Время действия",
                    "dramatic_info": {
                        "scene_type": "setup/development/climax/resolution",
                        "tension_level": "нарастающее/высокое/пиковое/спадающее",
                        "is_turning_point": true/false,
                        "scene_goals": ["Цель 1", "Цель 2"],
                        "dramatic_questions": ["Вопрос 1", "Вопрос 2"],
                        "required_elements": ["Элемент 1", "Элемент 2"]
                    }
                }
            ]
        }
    ]
} 